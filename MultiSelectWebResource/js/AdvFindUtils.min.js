var AdvancedMultiSelect=window.AdvancedMultiSelect||{__namespace:!0};AdvancedMultiSelect.AdvFindUtils=function(){var t=function(n){return xrmjQuery("#"+n,parent.document).get(0).contentWindow},n=function(n){var i=t(n);return!i||!i.$find?null:i.$find("advFind")},i=function(n){return parent.Mscrm.EntityPropUtil.EntityTypeName2CodeMap[n]},r=function(n,t){var r,i,u;n.ResetControl();n.set_fetchXml(t);r=xrmjQuery.parseXML(n.get_layoutXml());i=xrmjQuery(r);i.find("cell").each(function(){xrmjQuery(this).remove()});var f=i.find("row"),e=xrmjQuery.parseXML(t),o=xrmjQuery(e),s=o.find("entity"),h=s.find("attribute");h.each(function(){var t=xrmjQuery(this).attr("name"),n=xrmjQuery("<cell>",i);n.attr("name",t);n.attr("width","200");f.append(n)});u=AdvancedMultiSelect.XmlUtils.XmlToString(r);n.set_layoutXml(u)},u=function(t,u,f,e){var s=Xrm.Page.context.getClientUrl(),h=i(u),c=s+"/SFA/goal/ParticipatingQueryCondition.aspx?entitytypecode="+h,o=Xrm.Page.ui.controls.get(t),l=o.getObject();l.addEventListener("load",function(){try{if(f)try{var i=n(t);if(!i)return;r(i,f)}catch(o){try{e();return}catch(o){}}}catch(u){console.error(u)}});o.setSrc(c)},f=function(n){var t=Xrm.Page.ui.controls.get(n);t.setSrc("about:blank")},e=function(t,i){var r=n(t);r.add_onChange(i)};return{GetAdvFindControl:n,SetSrc:u,ClearSrc:f,AddOnAdvFindChange:e}}();