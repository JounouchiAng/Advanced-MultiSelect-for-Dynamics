var AdvancedMultiSelect=window.AdvancedMultiSelect||{__namespace:!0};AdvancedMultiSelect.FormUtils=function(){var t=function(n){var t=n.getEventArgs(),i=t.getSaveMode(),r=i===AdvancedMultiSelect.FormSaveModes.AUTOSAVE||i===AdvancedMultiSelect.FormSaveModes.SAVE_AND_CLOSE;return r?(t.preventDefault(),!0):!1},i=function(n){n&&(Xrm.Page.data.entity.attributes.forEach(function(n){n.setSubmitMode("never")}),Xrm.Page.data.setFormDirty(!1));Xrm.Utility.openEntityForm(Xrm.Page.data.entity.getEntityName(),Xrm.Page.data.entity.getId())},r=function(n,t,i,r){r=r||"Loading, please wait";i=i||500;var e=30,u=1,f=function(){var s=t(),o;if(!s){Xrm.Page.ui.clearFormNotification(n);return}u>e&&(u=1);o=r+Array(u).join(".");Xrm.Page.ui.setFormNotification(o,"INFO",n);u++;setTimeout(f,i)};f()},u=function(n,t,i){var u="Autocomplete Validation",f=Xrm.Page.getAttribute(n.getName()),o=f.getRequiredLevel().toLowerCase()==="required",e=f.getValue(),r;return e?(r=t(e),r)?(n.clearNotification(u),!0):(i=i||"",n.setNotification("Please provide a valid value for "+n.getLabel()+". "+i,u),!1):(r=o?!1:!0,r&&n.clearNotification(u),r)},n=function(n,t,i,r){var u,h,e,f,o,s;try{for(u=n.getValue(),u=u==null?"":u.trim().toLowerCase(),h=u.length,r=r||1e3,e={},f=[],o=0;o<t.length;o++)if(s=i(u,o),s&&(f.push(s),f.length===r&&(f.length<t.length&&(e.commands={id:"more items",label:"There are more items..."}),h!==0)))break;e.results=f;f.length===0&&(e.commands={id:"noitems",label:"No matching options found."});n.showAutoComplete(e)}catch(c){Xrm.Utility.alertDialog("An error occured while validating autocomple: "+message)}},f=function(t,i,r,u){n(t.getEventSource(),i,r,u)},e=function(n){return parent.document.getElementById(n)},o=function(n){return e(n.getName()+"_i")};return{PreventAutoSave:t,Reload:i,ShowWaitingNotification:r,ValidateAutocomplete:u,OnAutocompleteKeyPress:f,ShowAutocomplete:n,GetInputElemByControl:o}}();