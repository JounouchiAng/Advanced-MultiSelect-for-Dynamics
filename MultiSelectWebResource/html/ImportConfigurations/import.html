<!DOCTYPE html>
<html>
<head>
  <title>Import AdvancedMultiSelect Configuration File</title>
  <script type="text/javascript" src="../../js/libraries/jquery.js"></script>
  <script type="text/javascript" src="../../js/libraries/knockout.js"></script>
  <script type="text/javascript" src="../../js/CrmWebApiFacade.js"></script>
  <script src="../../../ClientGlobalContext.js.aspx" type="text/javascript"></script>
  <script type="text/javascript" src="../../js/entities/ItemSetConfiguration/ImportConfigurations/import.js"></script>
  <link type="text/css" href="import.css" rel="stylesheet" />
</head>
<body>
<div class="wrapper">
  <div class="header">
    <p><b>Import AdvancedMultiSelect Configuration File</b></p>
  </div>
  <div class="main">
    <div>
      <input type="file" accept=".cfg" data-bind="event: {change: FileUpload}, enable: !IsImportInProgress()"><br>
    </div>
    <div class="loadingImageContainer" data-bind="visible: IsImportInProgress()">
      <img alt="Loading..." src="../../image/progress.gif"/>
    </div>
    <div class="errorNotification" style="display: none" data-bind="visible: !!ErrorMessage()">
      <p>
        <textarea rows="19" cols="100" readonly="readonly" data-bind="text: ErrorMessage"></textarea>
      </p>
    </div>
  </div>
  <div class="footer">
    <input type="button" class="footerButton" data-bind="click: Close, enable: !IsImportInProgress()" value="Cancel"/>
    <input type="button" class="footerButton" data-bind="click: Import, enable: IsReadyForImport() && !IsImportInProgress()" value="Import" />
  </div>
</div>

<script type="text/javascript">
  xrmjQuery(document).ready(function () {
    var vm = new window.AdvancedMultiSelect.ItemSetConfiguration.Import.ViewModel();
    ko.applyBindings(vm);
  });
</script>
</body>
</html>
